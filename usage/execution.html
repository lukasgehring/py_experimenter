<!DOCTYPE html>
<html class="writer-html5" lang="en">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Executing PyExperimenter &mdash; PyExperimenter 1.0 documentation</title>
      <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../_static/css/theme.css?v=19f00094" />
      <link rel="stylesheet" type="text/css" href="../_static/graphviz.css?v=eafc0fe6" />
      <link rel="stylesheet" type="text/css" href="../_static/sg_gallery.css?v=61a4c737" />

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="../_static/jquery.js?v=5d32c60e"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js?v=359c27e9"></script>
        <script src="../_static/doctools.js?v=888ff710"></script>
        <script src="../_static/sphinx_highlight.js?v=4825356b"></script>
        <script crossorigin="anonymous" integrity="sha256-Ae2Vz/4ePdIu6ZyI/5ZGsYnb+m0JlOmKPjt6XZ9JJkA=" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.4/require.min.js"></script>
    <script src="../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Examples" href="../examples/index.html" />
    <link rel="prev" title="Experiment Function" href="experiment_function.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../index.html" class="icon icon-home">
            PyExperimenter
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <p class="caption" role="heading"><span class="caption-text">Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../installation.html">Installation</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Usage</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="experiment_configuration_file.html">Experiment Configuration File</a></li>
<li class="toctree-l2"><a class="reference internal" href="database_credential_file.html">Database Credential File</a></li>
<li class="toctree-l2"><a class="reference internal" href="experiment_function.html">Experiment Function</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Executing PyExperimenter</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#creating-a-pyexperimenter">Creating a PyExperimenter</a></li>
<li class="toctree-l3"><a class="reference internal" href="#fill-database-table">Fill Database Table</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#fill-table-from-experiment-configuration-file">Fill Table From Experiment Configuration File</a></li>
<li class="toctree-l4"><a class="reference internal" href="#fill-table-with-specific-rows">Fill Table With Specific Rows</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#execute-experiments">Execute Experiments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#reset-experiments">Reset Experiments</a></li>
<li class="toctree-l3"><a class="reference internal" href="#obtain-results">Obtain Results</a></li>
<li class="toctree-l3"><a class="reference internal" href="#codecarbon">CodeCarbon</a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="../autoapi/index.html">API Reference</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help.html">Need Help?</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Development</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../issues.html">Creating an Issue</a></li>
<li class="toctree-l1"><a class="reference internal" href="../how-to-contribute.html">How to Contribute</a></li>
<li class="toctree-l1"><a class="reference internal" href="../3rd-party.html">Usage of 3rd Party Dependencies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../release-version.html">Release Version</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">About PyExperimenter</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../cite.html">Cite PyExperimenter</a></li>
<li class="toctree-l1"><a class="reference internal" href="../authors.html">Authors</a></li>
<li class="toctree-l1"><a class="reference internal" href="../license.html">License</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">Changelog</a></li>
<li class="toctree-l1"><a class="reference external" href="https://github.com/tornede/py_experimenter/">Repository</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">PyExperimenter</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content style-external-links">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../index.html" class="icon icon-home" aria-label="Home"></a></li>
          <li class="breadcrumb-item"><a href="index.html">Usage</a></li>
      <li class="breadcrumb-item active">Executing PyExperimenter</li>
      <li class="wy-breadcrumbs-aside">
            <a href="../_sources/usage/execution.rst.txt" rel="nofollow"> View page source</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="executing-pyexperimenter">
<span id="execution"></span><h1>Executing PyExperimenter<a class="headerlink" href="#executing-pyexperimenter" title="Permalink to this heading"></a></h1>
<p>The actual execution of <code class="docutils literal notranslate"><span class="pre">PyExperimenter</span></code> only needs a few lines of code. Please make sure that you have created the <a class="reference internal" href="experiment_configuration_file.html#experiment-configuration-file"><span class="std std-ref">experiment configuration file</span></a> and defined the <a class="reference internal" href="experiment_function.html#experiment-function"><span class="std std-ref">experiment function</span></a> beforehand.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">py_experimenter.experimenter</span> <span class="kn">import</span> <span class="n">PyExperimenter</span>

<span class="n">experimenter</span> <span class="o">=</span> <span class="n">PyExperimenter</span><span class="p">()</span>
<span class="n">experimenter</span><span class="o">.</span><span class="n">fill_table_from_config</span><span class="p">()</span>
<span class="n">experimenter</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span><span class="n">run_experiment</span><span class="p">,</span> <span class="n">max_experiments</span><span class="o">=-</span><span class="mi">1</span><span class="p">)</span>
</pre></div>
</div>
<p>The above code will execute all experiments defined in the <a class="reference internal" href="experiment_configuration_file.html#experiment-configuration-file"><span class="std std-ref">experiment configuration file</span></a>. If you want to do something different, e.g. <a class="reference internal" href="#fill-table-with-rows"><span class="std std-ref">fill the database table with specific rows</span></a>, or <a class="reference internal" href="#reset-experiments"><span class="std std-ref">reset experiments</span></a>, check out the following sections.</p>
<section id="creating-a-pyexperimenter">
<span id="execution-creating-pyexperimenter"></span><h2>Creating a PyExperimenter<a class="headerlink" href="#creating-a-pyexperimenter" title="Permalink to this heading"></a></h2>
<p>A <code class="docutils literal notranslate"><span class="pre">PyExperimenter</span></code> can be created without any further information, assuming the <a class="reference internal" href="experiment_configuration_file.html#experiment-configuration-file"><span class="std std-ref">experiment configuration file</span></a> can be accessed at its default location.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">experimenter</span> <span class="o">=</span> <span class="n">PyExperimenter</span><span class="p">()</span>
</pre></div>
</div>
<p>Additionally, further information can be given to <code class="docutils literal notranslate"><span class="pre">PyExperimenter</span></code>:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">experiment_configuration_file_path</span></code>: The path of the <a class="reference internal" href="experiment_configuration_file.html#experiment-configuration-file"><span class="std std-ref">experiment configuration file</span></a>. Default: <code class="docutils literal notranslate"><span class="pre">config/experiment_configuration.cfg</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">database_credential_file_path</span></code>: The path of the <a class="reference internal" href="database_credential_file.html#database-credential-file"><span class="std std-ref">database credential file</span></a>. Default: <code class="docutils literal notranslate"><span class="pre">config/database_credentials.cfg</span></code></p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">database_name</span></code>: The name of the database to manage the experiments. If given, it will overwrite the database name given in the <cite>experiment_configuration_file_path</cite>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">table_name</span></code>: The name of the database table to manage the experiments. If given, it will overwrite the table name given in the <cite>experiment_configuration_file_path</cite>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">use_codecarbon</span></code>: Specifies if <a class="reference internal" href="experiment_configuration_file.html#experiment-configuration-file-codecarbon"><span class="std std-ref">CodeCarbon</span></a> will be used to track experiment emissions. Default: <code class="docutils literal notranslate"><span class="pre">True</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">name</span></code>: The name of the experimenter, which will be added to the database table of each executed experiment. If using the PyExperimenter on an HPC system, this can be used for the job ID, so that the according log file can easily be found. Default: <code class="docutils literal notranslate"><span class="pre">PyExperimenter</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">logger_name</span></code>: The name of the logger, which will be used to log information about the execution of the PyExperimenter. If there already exists a logger with the given <code class="docutils literal notranslate"><span class="pre">logger_name</span></code>, it will be used instead. However, the <code class="docutils literal notranslate"><span class="pre">log_file</span></code> will be ignored in this case. The logger will then be passed to every component of <code class="docutils literal notranslate"><span class="pre">PyExperimenter</span></code>, so that all information is logged to the same file. Default: <code class="docutils literal notranslate"><span class="pre">py-experimenter</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log_level</span></code>: The log level of the logger. Default: <code class="docutils literal notranslate"><span class="pre">INFO</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">log_file</span></code>: The path of the log file. Default: <code class="docutils literal notranslate"><span class="pre">py-experimenter.log</span></code>.</p></li>
</ul>
</section>
<section id="fill-database-table">
<h2>Fill Database Table<a class="headerlink" href="#fill-database-table" title="Permalink to this heading"></a></h2>
<p>The database table can be filled in two ways:</p>
<ul class="simple">
<li><p><a class="reference internal" href="#fill-table-from-config"><span class="std std-ref">Fill table from experiment configuration file</span></a></p></li>
<li><p><a class="reference internal" href="#fill-table-with-rows"><span class="std std-ref">Fill table with specific rows</span></a></p></li>
</ul>
<section id="fill-table-from-experiment-configuration-file">
<span id="fill-table-from-config"></span><h3>Fill Table From Experiment Configuration File<a class="headerlink" href="#fill-table-from-experiment-configuration-file" title="Permalink to this heading"></a></h3>
<p>The database table can be filled with the cartesian product of the keyfields defined in the <a class="reference internal" href="experiment_configuration_file.html#experiment-configuration-file"><span class="std std-ref">experiment configuration file</span></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">experimenter</span><span class="o">.</span><span class="n">fill_table_from_config</span><span class="p">()</span>
</pre></div>
</div>
</section>
<section id="fill-table-with-specific-rows">
<span id="fill-table-with-rows"></span><h3>Fill Table With Specific Rows<a class="headerlink" href="#fill-table-with-specific-rows" title="Permalink to this heading"></a></h3>
<p>Alternatively, or additionally, specific rows can be added to the table. Note that <code class="docutils literal notranslate"><span class="pre">rows</span></code> is a list of dicts, where each dict has to contain a value for each keyfield. A more complex example featuring a conditional experiment grid can be found in the <a class="reference internal" href="../examples/index.html#examples"><span class="std std-ref">examples section</span></a>.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">experimenter</span><span class="o">.</span><span class="n">fill_table_with_rows</span><span class="p">(</span><span class="n">rows</span><span class="o">=</span><span class="p">[</span>
    <span class="p">{</span>
        <span class="s1">&#39;dataset&#39;</span><span class="p">:</span> <span class="s1">&#39;new_data&#39;</span><span class="p">,</span>
        <span class="s1">&#39;cross_validation_splits&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="s1">&#39;seed&#39;</span><span class="p">:</span> <span class="mi">42</span><span class="p">,</span>
        <span class="s1">&#39;kernel&#39;</span><span class="p">:</span> <span class="s1">&#39;poly&#39;</span>
    <span class="p">},</span>
    <span class="p">{</span>
        <span class="s1">&#39;dataset&#39;</span><span class="p">:</span> <span class="s1">&#39;new_data_2&#39;</span><span class="p">,</span>
        <span class="s1">&#39;cross_validation_splits&#39;</span><span class="p">:</span> <span class="mi">4</span><span class="p">,</span>
        <span class="s1">&#39;seed&#39;</span><span class="p">:</span> <span class="mi">24</span><span class="p">,</span>
        <span class="s1">&#39;kernel&#39;</span><span class="p">:</span> <span class="s1">&#39;poly&#39;</span>
    <span class="p">}</span>
<span class="p">])</span>
</pre></div>
</div>
</section>
</section>
<section id="execute-experiments">
<h2>Execute Experiments<a class="headerlink" href="#execute-experiments" title="Permalink to this heading"></a></h2>
<p>An experiment can be executed easily with the following call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">experimenter</span><span class="o">.</span><span class="n">execute</span><span class="p">(</span>
    <span class="n">experiment_function</span> <span class="o">=</span> <span class="n">run_experiment</span><span class="p">,</span>
    <span class="n">max_experiments</span> <span class="o">=</span> <span class="o">-</span><span class="mi">1</span>
<span class="p">)</span>
</pre></div>
</div>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">experiment_function</span></code> is the previously defined <a class="reference internal" href="experiment_function.html#experiment-function"><span class="std std-ref">experiment funtion</span></a>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">max_experiments</span></code> determines how many experiments will be executed by this <code class="docutils literal notranslate"><span class="pre">PyExperimenter</span></code>. If set to <code class="docutils literal notranslate"><span class="pre">-1</span></code>, it will execute experiments in a sequential fashion until no more open experiments are available.</p></li>
</ul>
</section>
<section id="reset-experiments">
<span id="id1"></span><h2>Reset Experiments<a class="headerlink" href="#reset-experiments" title="Permalink to this heading"></a></h2>
<p>Each database table contains a <code class="docutils literal notranslate"><span class="pre">status</span></code> column, summarizing the current state of an experiment. Experiments can be reset based on these status. If this is done, the table rows having a given status will be deleted, and corresponding new rows without results will be created. A comma separated list of <code class="docutils literal notranslate"><span class="pre">status</span></code> has to be provided.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">experimenter</span><span class="o">.</span><span class="n">reset_experiments</span><span class="p">(</span><span class="o">&lt;</span><span class="n">status</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">status</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">...</span><span class="p">)</span>
</pre></div>
</div>
<p>The following status exist:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">created</span></code>: All parameters for the experiment are defined and the experiment is ready for execution.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">running</span></code>: The experiment is currently in execution.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">done</span></code>: The execution of the experiment terminated without interruption and the results are written into the database.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">error</span></code>: An error occurred during execution, which is also logged into the database.</p></li>
</ul>
</section>
<section id="obtain-results">
<span id="id2"></span><h2>Obtain Results<a class="headerlink" href="#obtain-results" title="Permalink to this heading"></a></h2>
<p>The current content of the database table can be obtained as a <code class="docutils literal notranslate"><span class="pre">pandas.DataFrame</span></code>. This can, for example, be used to generate a result table and export it to LaTeX.</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">result_table</span> <span class="o">=</span> <span class="n">experimenter</span><span class="o">.</span><span class="n">get_table</span><span class="p">()</span>
<span class="n">result_table</span> <span class="o">=</span> <span class="n">result_table</span><span class="o">.</span><span class="n">groupby</span><span class="p">([</span><span class="s1">&#39;dataset&#39;</span><span class="p">])</span><span class="o">.</span><span class="n">mean</span><span class="p">()[[</span><span class="s1">&#39;seed&#39;</span><span class="p">]]</span>
<span class="nb">print</span><span class="p">(</span><span class="n">result_table</span><span class="o">.</span><span class="n">to_latex</span><span class="p">(</span><span class="n">columns</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;seed&#39;</span><span class="p">],</span> <span class="n">index_names</span><span class="o">=</span><span class="p">[</span><span class="s1">&#39;dataset&#39;</span><span class="p">]))</span>
</pre></div>
</div>
</section>
<section id="codecarbon">
<span id="execution-codecarbon"></span><h2>CodeCarbon<a class="headerlink" href="#codecarbon" title="Permalink to this heading"></a></h2>
<p>Tracking information about the carbon footprint of experiments is supported via <a class="reference internal" href="experiment_configuration_file.html#experiment-configuration-file-codecarbon"><span class="std std-ref">CodeCarbon</span></a>. Tracking is enabled by default, as described in <a class="reference internal" href="#execution-creating-pyexperimenter"><span class="std std-ref">how to create a PyExperimenter</span></a>. If the tracking is enabled, the according information can be found in the database table <code class="docutils literal notranslate"><span class="pre">&lt;table_name&gt;_codecarbon</span></code>, which can be easily accessed with the following call:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">experimenter</span><span class="o">.</span><span class="n">get_codecarbon_table</span><span class="p">()</span>
</pre></div>
</div>
</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="experiment_function.html" class="btn btn-neutral float-left" title="Experiment Function" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="../examples/index.html" class="btn btn-neutral float-right" title="Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2022, Tanja Tornede, Alexander Tornede, Lukas Fehring, Lukas Gehring, Helena Graf, Jonas Hanselle, Felix Mohr, Marcel Wever.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>